var AbortablePromise=function(){"use strict";function n(){const n={aborted:!1,onabort:null},t=t=>{if(n.aborted)return;const{onabort:onabort}=n;"function"==typeof onabort&&onabort(t);n.aborted=!0};return{signal:n,abort:t}}class t extends Promise{constructor(t,o){super((r,e)=>{o||(o=n());t(r,e,o.signal)}),this.abortController=o}then(n,o){return new t((r,e,i)=>{const c=(n,o,c)=>{if("function"==typeof c)return(o=c(o))instanceof t&&Object.assign(i,o.abortController.signal),r(o);"resolved"===n&&r(o);"rejected"===n&&e(o)};super.then(t=>c("resolved",t,n),n=>c("rejected",n,o))},this.abortController)}abort(n){return new t((t,o)=>{setTimeout(()=>{this.abortController.abort(n);this.then(t,o)})},this.abortController)}}return t.all=function(n){return new t((o,r,e)=>{e.onabort=(o=>{n.forEach(n=>{n instanceof t&&n.abort(o).catch(r)});r(o)});Promise.all(n).then(o,r)})},t.race=function(n){return new t((o,r,e)=>{e.onabort=(o=>{n.forEach(n=>{n instanceof t&&n.abort(o).catch(r)});r(o)});Promise.race(n).then(o,r)})},t}();
