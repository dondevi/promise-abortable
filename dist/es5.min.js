var AbortablePromise=function(){"use strict";function u(o,r){this.promise=new Promise(function(n,t){r=r||function(){var o={aborted:!1,onabort:null};return{signal:o,abort:function(n){if(!o.aborted){var t=o.onabort;"function"==typeof t&&t(n),o.aborted=!0}}}}(),o(n,t,r.signal)}),this.abortController=r}return((u.prototype=new Promise(function(){})).constructor=u).prototype.then=function(o,c){var n=this;return new u(function(r,e,i){function t(n,t,o){if("function"==typeof o)return(t=o(t))instanceof u&&Object.assign(i,t.abortController.signal),r(t);"resolved"===n&&r(t),"rejected"===n&&e(t)}n.promise.then(function(n){t("resolved",n,o)},function(n){t("rejected",n,c)})},this.abortController)},u.prototype.catch=function(n){return this.then(null,n)},u.prototype.abort=function(o){var r=this;return new u(function(n,t){setTimeout(function(){r.abortController.abort(o),r.then(n,t)})},this.abortController)},u.resolve=function(o){return new u(function(n,t){n(o)})},u.reject=function(o){return new u(function(n,t){t(o)})},u.all=function(r){return new u(function(n,o,t){t.onabort=function(t){r.forEach(function(n){n instanceof u&&n.abort(t).catch(o)}),o(t)},Promise.all(r).then(n,o)})},u.race=function(r){return new u(function(n,o,t){t.onabort=function(t){r.forEach(function(n){n instanceof u&&n.abort(t).catch(o)}),o(t)},Promise.race(r).then(n,o)})},u}();
